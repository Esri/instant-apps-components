name: Offer Publish

# only trigger on pull request closed events
on:
  pull_request:
    types: [ closed ]

jobs:
  merge_job:
    # this job will only run if the PR has been merged
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - id: check
        uses: EndBug/version-check@v2
        with:
          file-url: https://unpkg.com/@esri/instant-apps-components@latest/package.json
          static-checking: localIsNew
      - uses: mshick/add-pr-comment@v2
        with:
          message: |
            **instant-apps-components** status
            NPM Package Version: ${{ steps.check.outputs.version }}
            Repo Package Version: ${{ steps.check.outputs.newVersion }}
            If you would like to follow this PR up with a publish, please proceed to here: 
              https://github.com/rslibed/instant-apps-stencil/actions/new