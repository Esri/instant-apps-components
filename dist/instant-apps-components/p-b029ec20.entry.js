import{r as t,h as n,g as i,H as e}from"./p-e9d68db2.js";import{g as s}from"./p-85d87d2d.js";let o=class{constructor(n){t(this,n),this.pagination=!1}componentDidLoad(){this.getMessages()}render(){var t;return n("calcite-popover",{"reference-element":this.referenceElement,heading:this.popoverTitle,"auto-close":"true",dismissible:"true",placement:"leading","intl-close":null===(t=this.messages)||void 0===t?void 0:t.close},n("div",{class:"instant-apps-popover__content"},n("slot",{name:"action"}),n("section",null,this.content),this.pagination?this.renderPagination():null))}renderPagination(){var t,i;const{index:e,messages:s,parent:o}=this,a=e===(null===(i=null===(t=this.parent)||void 0===t?void 0:t.instantAppsPopovers)||void 0===i?void 0:i.size)-1;return n("div",{key:"pagination-button-container",class:"instant-apps-popover__button-container"},0===e?null:n("calcite-button",{key:"prev",onClick:()=>null==o?void 0:o.page("back"),appearance:"outline",color:"neutral"},null==s?void 0:s.back),n("calcite-button",{key:"next",onClick:()=>null==o?void 0:o.page("next")},a?null==s?void 0:s.done:null==s?void 0:s.next))}async getMessages(){const t=await s(this.el);this.messages=t[0]}get el(){return i(this)}};o.style=":host{display:block}.instant-apps-popover__content{padding:2.5%;padding-top:0;max-width:25vw}.instant-apps-popover__content .instant-apps-popover__button-container{display:flex;align-items:center;justify-content:flex-end;margin-top:10px}.instant-apps-popover__content .instant-apps-popover__button-container calcite-button:last-child{margin-left:5px}";let a=class{constructor(n){t(this,n),this.instantAppsPopovers=new Map}componentWillLoad(){var t;Array.from(null===(t=this.host.querySelector("[slot='popovers']"))||void 0===t?void 0:t.children).forEach(((t,n)=>{const i=t.getAttribute("reference-element");0===n&&(this.currentId=i),t.parent=this,t.index=n,this.instantAppsPopovers.set(i,t)}))}render(){return n(e,null,n("slot",{name:"popovers"}))}handlePrevious(t){if(this.previous){const n="reference-element";if(this.previous.getAttribute(n)===t.getAttribute(n))return;this.previous.toggle(!1)}this.previous=t}page(t){var n,i;const e=this.getKey(t);if(!e){const t=null===(n=this.instantAppsPopovers.get(this.currentId))||void 0===n?void 0:n.firstElementChild;return this.handlePrevious(t),void t.toggle(!1)}const s=null===(i=this.instantAppsPopovers.get(e))||void 0===i?void 0:i.firstElementChild;this.handlePrevious(s),s.toggle(!0),this.currentId=e}getKey(t){const[...n]=this.instantAppsPopovers.keys(),i=this.getIndex();if(null!==i)return"next"===t?n[i+1]:n[i-1]}getIndex(){if(!this)return null;const{currentId:t}=this,[...n]=this.instantAppsPopovers.keys();return n.indexOf(t)}async open(t){var n;const i=this.instantAppsPopovers.get(t),e=null===(n=this.instantAppsPopovers.get(t))||void 0===n?void 0:n.firstElementChild;(null==i?void 0:i.beforeOpen)&&await i.beforeOpen(),e.toggle(!0)}async close(t){var n;(null===(n=this.instantAppsPopovers.get(t))||void 0===n?void 0:n.firstElementChild).toggle(!1)}get host(){return i(this)}};a.style=":host{display:block}";export{o as instant_apps_popover,a as instant_apps_popovers}