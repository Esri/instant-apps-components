import{r as t,h as s,g as i,H as n}from"./p-5bb33799.js";import{g as o}from"./p-b27a88a3.js";let e=class{constructor(s){t(this,s),this.placement="trailing-start"}componentDidLoad(){this.getMessages()}componentDidUpdate(){this.popoverEl.referenceElement=this.referenceElement}render(){var t;return s("calcite-popover",{ref:t=>this.popoverEl=t,heading:this.popoverTitle,"auto-close":"true",dismissible:"true",placement:this.placement,"intl-close":null===(t=this.messages)||void 0===t?void 0:t.close,"trigger-disabled":"true","ref-id":this.refId},s("div",{class:"instant-apps-popover__content"},s("slot",{name:"action"}),s("section",null,this.content),this.parent.pagination?this.renderPagination():null))}renderPagination(){var t,i;const{index:n,messages:o,parent:e}=this,a=n===(null===(i=null===(t=this.parent)||void 0===t?void 0:t.instantAppsPopovers)||void 0===i?void 0:i.size)-1;return s("div",{key:"pagination-button-container",class:"instant-apps-popover__button-container"},0===n?null:s("calcite-button",{key:"prev",onClick:()=>null==e?void 0:e.previous(),appearance:"outline",color:"neutral"},null==o?void 0:o.back),s("calcite-button",{key:"next",onClick:()=>{a?null==e||e.done():null==e||e.next()}},a?null==o?void 0:o.done:null==o?void 0:o.next))}async getMessages(){const t=await o(this.el);this.messages=t[0]}get el(){return i(this)}};e.style=":host{display:block}.instant-apps-popover__content{padding:2.5%;max-width:25vw}.instant-apps-popover__content .instant-apps-popover__button-container{display:flex;align-items:center;justify-content:flex-end;margin-top:10px}.instant-apps-popover__content .instant-apps-popover__button-container calcite-button:last-child{margin-left:5px}";let a=class{constructor(s){t(this,s),this.instantAppsPopovers=new Map,this.pagination=!1,this.beforeOpen=()=>Promise.resolve()}componentWillLoad(){var t;Array.from(null===(t=this.host.querySelector("[slot='popovers']"))||void 0===t?void 0:t.children).forEach(((t,s)=>{const i=t.getAttribute("ref-id");t.parent=this,t.index=s,this.instantAppsPopovers.set(i,t)})),this.host.addEventListener("calcitePopoverOpen",(t=>{const s=t.target.getAttribute("ref-id");this.currentId=s})),this.host.addEventListener("calcitePopoverClose",(()=>{this.endTour()}))}render(){return s(n,null,s("slot",{name:"popovers"}))}next(){const t=Array.from(this.instantAppsPopovers.keys()),s=t.indexOf(this.currentId)+1,i=t[s];this.close(this.currentId),this.open(i)}previous(){const t=Array.from(this.instantAppsPopovers.keys()),s=t.indexOf(this.currentId)-1,i=t[s];this.close(this.currentId),this.open(i)}done(){this.endTour()}async open(t){return this.beforeOpen().then((()=>{var s;(null===(s=this.instantAppsPopovers.get(t))||void 0===s?void 0:s.firstElementChild).toggle(!0)}))}async close(t){var s;(null===(s=this.instantAppsPopovers.get(t))||void 0===s?void 0:s.firstElementChild).toggle(!1)}async beginTour(){const t=document.createElement("calcite-scrim");t.id="instantAppsPopoverScrim",t.addEventListener("click",(()=>this.endTour())),document.body.appendChild(t);const s=Array.from(this.instantAppsPopovers.keys());this.open(s[0])}async endTour(){const t=document.getElementById("instantAppsPopoverScrim");null==t||t.remove(),this.close(this.currentId)}get host(){return i(this)}};a.style=":host{display:block}";export{e as instant_apps_popover,a as instant_apps_popovers}