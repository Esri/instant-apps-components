<!-- /*
 *   Copyright (c) 2022 Esri
 *   All rights reserved.
 *   Licensed under the Apache License, Version 2.0 (the "License");
 *   you may not use this file except in compliance with the License.
 *   You may obtain a copy of the License at
 *   http://www.apache.org/licenses/LICENSE-2.0
 *   Unless required by applicable law or agreed to in writing, software
 *   distributed under the License is distributed on an "AS IS" BASIS,
 *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *   See the License for the specific language governing permissions and
 *   limitations under the License.
 */ -->

<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>ArcGIS Online: Instant Apps Components</title>

    <link rel="stylesheet" href="https://jsdev.arcgis.com/4.24/esri/themes/light/main.css" />
    <script src="https://jsdev.arcgis.com/4.24/"></script>

    <script type="module" src="https://unpkg.com/@esri/calcite-components@1.0.0-beta.82/dist/calcite/calcite.esm.js"></script>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/@esri/calcite-components@1.0.0-beta.82/dist/calcite/calcite.css" />
    <script type="module" src="/build/instant-apps-components.esm.js"></script>
    <script nomodule src="/build/instant-apps-components.js"></script>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html,
      body,
      calcite-shell {
        width: 100%;
        height: 100%;
      }
      .open {
        position: relative;
        top: 50%;
        left: 50%;
      }
    </style>
  </head>

  <body>
    <instant-apps-popovers id="popovers" pagination="true">
      <div slot="popovers">
        <instant-apps-popover
          id="onePopover"
          reference-element="one"
          ref-id="one"
          popover-title="Chain 1"
          subtitle="Subtitle"
          content="Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit aspernatur omnis quod! Tempore fugiat excepturi ea tenetur animi mollitia tempora."
          graphic="Graphic"
        >
          <calcite-button slot="action" icon-start="arrow-left" appearance="transparent" color="neutral">Back to 'Get started'</calcite-button>
        </instant-apps-popover>
        <instant-apps-popover
          reference-element="two"
          ref-id="two"
          popover-title="Chain 2"
          subtitle="Subtitle"
          content="Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit aspernatur omnis quod! Tempore fugiat excepturi ea tenetur animi mollitia tempora."
          popover-title="Chain 3"
        >
          <calcite-button slot="action" icon-start="arrow-left" appearance="transparent" color="neutral">Back to 'Get started'</calcite-button>
        </instant-apps-popover>
        <instant-apps-popover
          reference-element="three"
          ref-id="three"
          popover-title="Three"
          subtitle="Subtitle"
          content="Lorem ipsum dolor sit amet consectetur adipisicing elit. Impedit aspernatur omnis quod! Tempore fugiat excepturi ea tenetur animi mollitia tempora."
          graphic="Graphic"
        >
          <calcite-button slot="action" icon-start="arrow-left" appearance="transparent" color="neutral">Back to 'Get started'</calcite-button>
        </instant-apps-popover>
      </div>
    </instant-apps-popovers>
    <calcite-shell>
      <calcite-shell-panel slot="primary-panel" position="start" detached>
        <calcite-action-bar slot="action-bar">
          <calcite-action-group>
            <calcite-action id="one" text="Add" icon="plus"></calcite-action>
            <calcite-action text="Save" disabled icon="save"></calcite-action>
            <calcite-action id="two" text="Layers" active indicator icon="layers"></calcite-action>
          </calcite-action-group>
          <calcite-action-group>
            <calcite-action text="Add" icon="plus"></calcite-action>
            <calcite-action id="three" text="Layers" indicator icon="layers"></calcite-action>
          </calcite-action-group>
        </calcite-action-bar>
      </calcite-shell-panel>
    </calcite-shell>
    <button class="open" value="one">Open me!</button>
    <button class="open" value="two">Open me!</button>
    <button class="open" value="three">Open me!</button>
    <script>
      const popovers = document.getElementById('popovers');
      setTimeout(() => {
        popovers.beginTour();
      }, 3000);
      // const onePopover = document.getElementById('onePopover');
      // onePopover.beforeOpen = async () => {
      //   console.log('TEST');
      // };
      // const popovers = document.getElementById('popovers');
      // document.body.addEventListener('click', e => {
      //   const node = e.target;
      //   if (node.classList.contains('open')) {
      //     const id = node.value;
      //     popovers.open(id);
      //   }
      // });
    </script>
  </body>
</html>
